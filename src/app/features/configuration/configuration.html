<section hlmCard class="benchmark-config">
  <header hlmCardHeader>
    <h2 hlmCardTitle class="title">
      <lucide-icon name="settings" size="20"></lucide-icon>
      Configuration
    </h2>
    <p hlmCardDescription>
      Set up your benchmark parameters
    </p>
  </header>
  <div hlmCardContent class="config-content">
    <!-- Target URL -->
    <div class="form-field">
      <label hlmLabel for="target-url">Target URL</label>
      <input
        hlmInput
        id="target-url"
        type="url"
        [(ngModel)]="targetUrl"
        placeholder="https://example.com"
      />
    </div>

    <!-- Requests and Interval -->
    <div class="form-grid">
      <div class="form-field">
        <label hlmLabel for="requests">Requests</label>
        <input
          hlmInput
          id="requests"
          type="number"
          [(ngModel)]="requests"
          min="1"
        />
      </div>

      <div class="form-field">
        <label hlmLabel for="interval">Interval (s)</label>
        <input
          hlmInput
          id="interval"
          type="number"
          [(ngModel)]="interval"
          min="0.1"
          step="0.1"
        />
      </div>
    </div>

    <!-- HTTP Method -->
    <div class="form-field">
      <label hlmLabel for="method">HTTP Method</label>
      <select hlmInput id="method" [(ngModel)]="method">
        <option>GET</option>
        <option>POST</option>
        <option>PUT</option>
        <option>PATCH</option>
        <option>DELETE</option>
        <option>HEAD</option>
        <option>OPTIONS</option>
      </select>
    </div>

    <!-- Custom JS Toggle -->
    <div class="form-field">
      <button hlmBtn variant="outline" (click)="toggleCustom()">Custom JS</button>
    </div>

    <!-- Custom JS Editor -->
    @if (showCustom) {
      <div class="form-field custom-editor">
        <label hlmLabel for="custom-code">Request Code</label>
        <textarea
          hlmInput
          id="custom-code"
          [(ngModel)]="customCode"
          placeholder="await http.request(method, targetUrl).toPromise();"
        ></textarea>
      </div>
    }

    <!-- Warm-up Request Toggle -->
    <div class="toggle-field">
      <label hlmLabel for="warmup-request">Warm-up Request</label>
      <hlm-switch
        id="warmup-request"
        [(ngModel)]="warmupRequest"
      ></hlm-switch>
    </div>

    <!-- Control Buttons -->
    @if (!isRunning() && !pendingRun) {
      <button
        hlmBtn
        class="submit-button"
        variant="default"
        (click)="startBenchmark()"
        [disabled]="!isValidConfiguration()"

      >
        <lucide-icon name="play" size="20"></lucide-icon>
        Start Requests
      </button>
    }
    @if (isRunning()) {
      <button
        hlmBtn
        class="submit-button"
        variant="outline"
        (click)="stopBenchmark()"
      >
        <lucide-icon name="stop" size="20"></lucide-icon>
        Stop
      </button>
    }
    @if (!isRunning() && pendingRun) {
      <button
        hlmBtn
        class="submit-button"
        variant="default"
        (click)="continueBenchmark()"
      >
        <lucide-icon name="play" size="20"></lucide-icon>
        Continue
      </button>
    }
  </div>
</section>

